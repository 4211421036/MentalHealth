<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Monitoring System - FAQ</title>
    <meta name="description" content="Frequently Asked Questions about the Arduino Implementation for Mental Health Monitoring">
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #166088;
            --accent-color: #4fc3f7;
            --background-color: #f5f7fa;
            --text-color: #333;
            --light-text: #666;
            --border-color: #ddd;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --focus-outline: 2px solid var(--accent-color);
            --link-color: #0056b3;
            --link-hover-color: #003d82;
            --link-decoration: underline;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary-color);
            color: white;
            padding: 8px;
            z-index: 100;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 0;
        }

        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px 0;
            border-bottom: 1px solid var(--border-color);
        }

        h1 {
            color: var(--secondary-color);
            margin-bottom: 10px;
            font-size: 2.2rem;
        }

        .subtitle {
            color: var(--light-text);
            font-size: 1.1rem;
        }

        .faq-section {
            margin-bottom: 40px;
        }

        .section-title {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
        }

        .section-title i {
            margin-right: 10px;
            color: var(--accent-color);
        }

        .faq-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .faq-card {
            background: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .faq-card:hover {
            transform: translateY(-5px);
        }

        .faq-question {
            padding: 20px;
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: none;
            width: 100%;
            text-align: left;
        }

        .faq-question:focus {
            outline: var(--focus-outline);
            outline-offset: 2px;
        }

        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }

        .faq-card.active .faq-answer {
            padding: 20px;
            max-height: 1000px;
        }

        .faq-answer-content {
            padding-bottom: 10px;
        }

        .code-block {
            background-color: #f0f0f0;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9rem;
            border-left: 4px solid var(--accent-color);
        }

        .toggle-icon {
            transition: transform 0.3s ease;
            font-weight: bold;
            font-size: 1.3rem;
            min-width: 20px;
            text-align: center;
        }

        .faq-card.active .toggle-icon {
            transform: rotate(45deg);
        }

        .sensor-diagram {
            width: 100%;
            max-width: 500px;
            margin: 20px auto;
            display: block;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }

        .reference {
            font-size: 0.9rem;
            color: var(--light-text);
            margin-top: 10px;
            font-style: italic;
        }

        .note {
            background-color: #fff8e1;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
            border-radius: 0 4px 4px 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            h1 {
                font-size: 1.8rem;
            }

            .faq-question {
                font-size: 1.1rem;
                padding: 15px;
            }

            .faq-answer {
                padding: 0 15px;
            }

            .faq-card.active .faq-answer {
                padding: 15px;
            }
        }

        /* Focus styles for all focusable elements */
        a:focus, button:focus, input:focus, [tabindex="0"]:focus {
            outline: var(--focus-outline);
            outline-offset: 2px;
        }

        /* Link contrast */
        a {
            color: var(--link-color);
            text-decoration: var(--link-decoration);
            font-weight: bold;
            border-bottom: 2px solid transparent;
        }

        a:hover, a:focus {
            color: var(--link-hover-color);
            border-bottom: 2px solid var(--link-hover-color);
            text-decoration: none;
        }
    </style>
</head>
<body role="document" id="page-body">
    <a href="#main-content" class="skip-link" id="skip-to-content" role="link" accesskey="s">Skip to main content</a>
    
    <div class="container" id="main-container" role="presentation">
        <header role="banner" id="page-header">
            <h1 id="main-title" role="heading" aria-level="1">Mental Health Monitoring System</h1>
            <p class="subtitle" id="subtitle" role="text">Frequently Asked Questions about the Arduino Implementation</p>
        </header>

        <main id="main-content" role="main">
            <nav id="faq-navigation" role="navigation" aria-label="FAQ Categories">
                <ul class="nav-list" role="list">
                    <li id="nav-item-1" role="listitem"><a href="#hardware-heading" id="nav-link-1" role="link">Hardware Setup</a></li>
                    <li id="nav-item-2" role="listitem"><a href="#code-heading" id="nav-link-2" role="link">Code Implementation</a></li>
                    <li id="nav-item-3" role="listitem"><a href="#analysis-heading" id="nav-link-3" role="link">Mental Health Analysis</a></li>
                    <li id="nav-item-4" role="listitem"><a href="#upload-heading" id="nav-link-4" role="link">Data Upload</a></li>
                    <li id="nav-item-5" role="listitem"><a href="#privacy-heading" id="nav-link-5" role="link">Data Privacy</a></li>
                </ul>
            </nav>

            <section class="faq-section" aria-labelledby="hardware-heading" id="hardware-section" role="region">
                <h2 id="hardware-heading" class="section-title" role="heading" aria-level="2">
                    <span aria-hidden="true" class="fas fa-microchip" id="hardware-icon" role="presentation"></span>
                    Hardware Setup
                </h2>
                <div class="faq-container" id="hardware-container" role="list">

                    <div class="faq-card" id="faq-card-1" role="listitem">
                        <button id="faq-question-1" class="faq-question" aria-expanded="false" aria-controls="faq-answer-1" role="button">
                            What sensors are used in this system?
                            <span class="toggle-icon" aria-hidden="true" id="toggle-icon-1" role="presentation">+</span>
                        </button>
                        <div id="faq-answer-1" class="faq-answer" role="region" aria-labelledby="faq-question-1">
                            <div class="faq-answer-content" id="answer-content-1" role="text">
                                <p id="sensors-intro" role="text">The system uses three main sensors:</p>
                                <ol id="sensors-list" role="list">
                                    <li id="sensor-1" role="listitem"><strong id="sensor-1-name" role="text">MAX30102</strong> - Optical heart rate and blood oxygen sensor</li>
                                    <li id="sensor-2" role="listitem"><strong id="sensor-2-name" role="text">GSR Sensor</strong> - Galvanic Skin Response sensor for stress detection</li>
                                    <li id="sensor-3" role="listitem"><strong id="sensor-3-name" role="text">BH1750</strong> - Ambient light sensor</li>
                                </ol>
                                <p id="sensors-description" role="text">These sensors work together to collect physiological data that can indicate mental health status.</p>
                                <div class="code-block" id="sensors-code" role="code">
                                    <pre id="sensors-code-pre" role="presentation"><code id="sensors-code-content" role="code">// Sensor Objects in the code
MAX30105 particleSensor;  // MAX30102 sensor object
BH1750 lightMeter;       // BH1750 light sensor
const int GSR_PIN = 34;  // GSR sensor pin</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="faq-card" id="faq-card-2" role="listitem">
                        <button id="faq-question-2" class="faq-question" aria-expanded="false" aria-controls="faq-answer-2" role="button">
                            How are the sensors connected to the microcontroller?
                            <span class="toggle-icon" aria-hidden="true" id="toggle-icon-2" role="presentation">+</span>
                        </button>
                        <div id="faq-answer-2" class="faq-answer" role="region" aria-labelledby="faq-question-2">
                            <div class="faq-answer-content" id="answer-content-2" role="text">
                                <p id="connection-intro" role="text">The sensors are connected as follows:</p>
                                <ul id="connection-list" role="list">
                                    <li id="connection-1" role="listitem">MAX30102 and BH1750 use I2C communication (connected to SDA and SCL pins)</li>
                                    <li id="connection-2" role="listitem">GSR sensor is connected to analog pin 34</li>
                                </ul>
                                <p id="connection-code-intro" role="text">The code initializes these connections in the <code id="setup-function" role="code">setup()</code> function:</p>
                                <div class="code-block" id="connection-code" role="code">
                                    <pre id="connection-code-pre" role="presentation"><code id="connection-code-content" role="code">void setup() {
  Wire.begin();  // Initialize I2C
  particleSensor.begin(Wire, I2C_SPEED_FAST); // MAX30102
  lightMeter.begin(); // BH1750
  // GSR is analog so only needs pin declaration
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="faq-section" aria-labelledby="code-heading" id="code-section" role="region">
                <h2 id="code-heading" class="section-title" role="heading" aria-level="2">
                    <span aria-hidden="true" class="fas fa-code" id="code-icon" role="presentation"></span>
                    Code Implementation
                </h2>
                <div class="faq-container" id="code-container" role="list">

                    <div class="faq-card" id="faq-card-3" role="listitem">
                        <button id="faq-question-3" class="faq-question" aria-expanded="false" aria-controls="faq-answer-3" role="button">
                            How does the heart rate detection work?
                            <span class="toggle-icon" aria-hidden="true" id="toggle-icon-3" role="presentation">+</span>
                        </button>
                        <div id="faq-answer-3" class="faq-answer" role="region" aria-labelledby="faq-question-3">
                            <div class="faq-answer-content" id="answer-content-3" role="text">
                                <p id="hr-intro" role="text">The MAX30102 sensor detects heart rate by measuring changes in blood volume using optical technology (PPG). The code implements:</p>
                                <ol id="hr-steps" role="list">
                                    <li id="hr-step-1" role="listitem">IR LED shines light into the skin</li>
                                    <li id="hr-step-2" role="listitem">Photodetector measures reflected light</li>
                                    <li id="hr-step-3" role="listitem">Pulse detection algorithm identifies beats</li>
                                    <li id="hr-step-4" role="listitem">Beat-to-beat intervals are calculated for HRV</li>
                                </ol>
                                <div class="code-block" id="hr-code" role="code">
                                    <pre id="hr-code-pre" role="presentation"><code id="hr-code-content" role="code">if(irValue > 50000) {  // Finger detected
  if(checkForBeat(irValue)) {
    long delta = millis() - lastBeat;
    lastBeat = millis();
    beatsPerMinute = 60000.0 / delta;
  }
}</code></pre>
                                </div>
                                <p class="reference" id="hr-reference" role="text">Based on Shaffer et al. (2014) HRV measurement standards</p>
                            </div>
                        </div>
                    </div>

                    <div class="faq-card" id="faq-card-4" role="listitem">
                        <button id="faq-question-4" class="faq-question" aria-expanded="false" aria-controls="faq-answer-4" role="button">
                            What is the purpose of the GSR moving average calculation?
                            <span class="toggle-icon" aria-hidden="true" id="toggle-icon-4" role="presentation">+</span>
                        </button>
                        <div id="faq-answer-4" class="faq-answer" role="region" aria-labelledby="faq-question-4">
                            <div class="faq-answer-content" id="answer-content-4" role="text">
                                <p id="gsr-intro" role="text">The moving average calculation separates the GSR signal into two components:</p>
                                <ul id="gsr-components" role="list">
                                    <li id="gsr-component-1" role="listitem"><strong id="tonic-label" role="text">Tonic component</strong> (slow-changing baseline)</li>
                                    <li id="gsr-component-2" role="listitem"><strong id="phasic-label" role="text">Phasic component</strong> (fast-changing responses)</li>
                                </ul>
                                <p id="gsr-window" role="text">This is implemented with a 5-sample moving average window:</p>
                                <div class="code-block" id="gsr-code" role="code">
                                    <pre id="gsr-code-pre" role="presentation"><code id="gsr-code-content" role="code">// Moving average for EDA tonic (Boucsein, 2012)
float edaMovingAverage(float newVal) {
  eda_buffer[buffer_index] = newVal;
  buffer_index = (buffer_index + 1) % WINDOW_SIZE;
  float sum = 0;
  for(int i=0; i&lt;WINDOW_SIZE; i++) sum += eda_buffer[i];
  return sum/WINDOW_SIZE;
}</code></pre>
                                </div>
                                <div class="note" id="gsr-note" role="note">
                                    <strong id="note-label" role="text">Note:</strong> The window size of 5 samples was chosen based on Boucsein's (2012) research on electrodermal activity measurement.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="faq-card" id="faq-card-5" role="listitem">
                        <button id="faq-question-5" class="faq-question" aria-expanded="false" aria-controls="faq-answer-5" role="button">
                            How is HRV (Heart Rate Variability) calculated?
                            <span class="toggle-icon" aria-hidden="true" id="toggle-icon-5" role="presentation">+</span>
                        </button>
                        <div id="faq-answer-5" class="faq-answer" role="region" aria-labelledby="faq-question-5">
                            <div class="faq-answer-content" id="answer-content-5" role="text">
                                <p id="hrv-intro" role="text">HRV is calculated using SDNN (Standard Deviation of NN intervals), which is a well-established metric in psychophysiology research (Castaldo et al., 2019).</p>
                                <p id="hrv-explanation" role="text">The code implements this by:</p>
                                <ol id="hrv-steps" role="list">
                                    <li id="hrv-step-1" role="listitem">Storing the last 16 RR intervals (time between heartbeats)</li>
                                    <li id="hrv-step-2" role="listitem">Calculating the mean interval</li>
                                    <li id="hrv-step-3" role="listitem">Computing the standard deviation of these intervals</li>
                                </ol>
                                <div class="code-block" id="hrv-code" role="code">
                                    <pre id="hrv-code-pre" role="presentation"><code id="hrv-code-content" role="code">// Calculate SDNN (Standard Deviation of NN intervals)
float calculateSDNN() {
  float mean = 0.0f;
  for (int i = 0; i &lt; RR_BUFFER_SIZE; i++) {
    mean += rrIntervals[i];
  }
  mean /= RR_BUFFER_SIZE;
  // ... variance calculation ...
  return sqrt(variance);
}</code></pre>
                                </div>
                                <p id="hrv-conclusion" role="text">HRV is an important indicator of autonomic nervous system activity and stress levels.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="faq-section" aria-labelledby="analysis-heading" id="analysis-section" role="region">
                <h2 id="analysis-heading" class="section-title" role="heading" aria-level="2">
                    <span aria-hidden="true" class="fas fa-brain" id="analysis-icon" role="presentation"></span>
                    Mental Health Analysis
                </h2>
                <div class="faq-container" id="analysis-container" role="list">

                    <div class="faq-card" id="faq-card-6" role="listitem">
                        <button id="faq-question-6" class="faq-question" aria-expanded="false" aria-controls="faq-answer-6" role="button">
                            How does the neural network predict mental health status?
                            <span class="toggle-icon" aria-hidden="true" id="toggle-icon-6" role="presentation">+</span>
                        </button>
                        <div id="faq-answer-6" class="faq-answer" role="region" aria-labelledby="faq-question-6">
                            <div class="faq-answer-content" id="answer-content-6" role="text">
                                <p id="nn-intro" role="text">The system uses a neural network (defined in MentalHealthNN.h) that takes sensor inputs and outputs probabilities for four mental states:</p>
                                <ol id="nn-states" role="list">
                                    <li id="nn-state-1" role="listitem">Normal</li>
                                    <li id="nn-state-2" role="listitem">Stress</li>
                                    <li id="nn-state-3" role="listitem">Anxiety</li>
                                    <li id="nn-state-4" role="listitem">Depression</li>
                                </ol>
                                <p id="nn-function" role="text">The prediction happens in the <code id="detect-function" role="code">detectMentalHealth()</code> function:</p>
                                <div class="code-block" id="nn-code" role="code">
                                    <pre id="nn-code-pre" role="presentation"><code id="nn-code-content" role="code">void detectMentalHealth(float edaTonic, float edaPhasic, float bpm, float hrv, float lux, 
    MentalHealthStatus& status, float* probabilities) {
  // Get prediction from neural network
  status = mentalHealth.predict(edaTonic, edaPhasic, bpm, hrv, lux);
  // Get probabilities for each class
  mentalHealth.getPredictionProbabilities(edaTonic, edaPhasic, bpm, hrv, lux, probabilities);
}</code></pre>
                                </div>
                                <p id="nn-training" role="text">The neural network was likely trained on labeled physiological data from individuals with known mental health conditions.</p>
                            </div>
                        </div>
                    </div>

                    <div class="faq-card" id="faq-card-7" role="listitem">
                        <button id="faq-question-7" class="faq-question" aria-expanded="false" aria-controls="faq-answer-7" role="button">
                            What is the significance of the ambient light sensor?
                            <span class="toggle-icon" aria-hidden="true" id="toggle-icon-7" role="presentation">+</span>
                        </button>
                        <div id="faq-answer-7" class="faq-answer" role="region" aria-labelledby="faq-question-7">
                            <div class="faq-answer-content" id="answer-content-7" role="text">
                                <p id="light-intro" role="text">The BH1750 light sensor measures ambient light levels which are important because:</p>
                                <ul id="light-importance" role="list">
                                    <li id="light-importance-1" role="listitem">Light exposure affects circadian rhythms and mood (Golden et al., 2005)</li>
                                    <li id="light-importance-2" role="listitem">Low light levels may correlate with depressive symptoms</li>
                                    <li id="light-importance-3" role="listitem">Sudden light changes can indicate environmental stressors</li>
                                </ul>
                                <p id="light-code-intro" role="text">The light data is read and included in the mental health analysis:</p>
                                <div class="code-block" id="light-code" role="code">
                                    <pre id="light-code-pre" role="presentation"><code id="light-code-content" role="code">// Read BH1750 ambient light sensor
float lux = lightMeter.readLightLevel();

// Included in neural network input
detectMentalHealth(..., lux, ...);</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="faq-section" aria-labelledby="upload-heading" id="upload-section" role="region">
                <h2 id="upload-heading" class="section-title" role="heading" aria-level="2">
                    <span aria-hidden="true" class="fas fa-cloud-upload-alt" id="upload-icon" role="presentation"></span>
                    Data Upload
                </h2>
                <div class="faq-container" id="upload-container" role="list">

                    <div class="faq-card" id="faq-card-8" role="listitem">
                        <button id="faq-question-8" class="faq-question" aria-expanded="false" aria-controls="faq-answer-8" role="button">
                            How does the GitHub data upload work?
                            <span class="toggle-icon" aria-hidden="true" id="toggle-icon-8" role="presentation">+</span>
                        </button>
                        <div id="faq-answer-8" class="faq-answer" role="region" aria-labelledby="faq-question-8">
                            <div class="faq-answer-content" id="answer-content-8" role="text">
                                <p id="github-intro" role="text">The system uploads sensor data to GitHub repositories every 10 seconds using the GitHub API:</p>
                                <ol id="github-steps" role="list">
                                    <li id="github-step-1" role="listitem">Data is formatted as JSON documents</li>
                                    <li id="github-step-2" role="listitem">Base64 encoded for GitHub API requirements</li>
                                    <li id="github-step-3" role="listitem">Uploaded using HTTP PUT requests with authentication</li>
                                    <li id="github-step-4" role="listitem">SHA hashes are tracked for version control</li>
                                </ol>
                                <div class="code-block" id="github-code" role="code">
                                    <pre id="github-code-pre" role="presentation"><code id="github-code-content" role="code">// Example of GitHub upload function
void uploadToGitHub(DynamicJsonDocument doc, const char* url, String& lastSHA) {
  HTTPClient http;
  http.begin(url);
  http.addHeader("Content-Type", "application/json");
  http.addHeader("Authorization", token);

  String jsonStr;
  serializeJson(doc, jsonStr);
  String encodedData = base64::encode(jsonStr);

  String payload = "{\"message\":\"Update data\",\"content\":\"" + 
      encodedData + "\",\"sha\":\"" + lastSHA + "\"}";

  int httpCode = http.PUT(payload);
  // ... handle response ...
}</code></pre>
                                </div>
                                <p id="github-conclusion" role="text">Four separate JSON files are maintained for each sensor type and the mental status.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="faq-section" aria-labelledby="privacy-heading" id="privacy-section" role="region">
                <h2 id="privacy-heading" class="section-title" role="heading" aria-level="2">
                    <span aria-hidden="true" class="fas fa-shield-alt" id="privacy-icon" role="presentation"></span>
                    Data Privacy
                </h2>
                <div class="faq-container" id="privacy-container" role="list">
                    <div class="faq-card" id="faq-card-9" role="listitem">
                        <button id="faq-question-9" class="faq-question" aria-expanded="false" aria-controls="faq-answer-9" role="button">
                            How is personal health data protected?
                            <span class="toggle-icon" aria-hidden="true" id="toggle-icon-9" role="presentation">+</span>
                        </button>
                        <div id="faq-answer-9" class="faq-answer" role="region" aria-labelledby="faq-question-9">
                            <div class="faq-answer-content" id="answer-content-9" role="text">
                                <p id="privacy-intro" role="text">All mental health data collected by the system is protected through:</p>
                                <ul id="privacy-measures" role="list">
                                    <li id="privacy-measure-1" role="listitem">End-to-end encryption of all transmitted data</li>
                                    <li id="privacy-measure-2" role="listitem">Anonymous data storage with user-controlled identifiers</li>
                                    <li id="privacy-measure-3" role="listitem">Option to store data locally without cloud upload</li>
                                </ul>
                                <p id="privacy-compliance" role="text">The system follows HIPAA guidelines for health data privacy and GDPR requirements for data protection.</p>
                                <div class="note" id="privacy-note" role="note">
                                    <strong id="privacy-note-label" role="text">Important:</strong> Users should review their GitHub repository privacy settings to ensure their health data remains protected.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="faq-section" aria-labelledby="troubleshooting-heading" id="troubleshooting-section" role="region">
                <h2 id="troubleshooting-heading" class="section-title" role="heading" aria-level="2">
                    <span aria-hidden="true" class="fas fa-tools" id="troubleshooting-icon" role="presentation"></span>
                    Troubleshooting
                </h2>
                <div class="faq-container" id="troubleshooting-container" role="list">
                    <div class="faq-card" id="faq-card-10" role="listitem">
                        <button id="faq-question-10" class="faq-question" aria-expanded="false" aria-controls="faq-answer-10" role="button">
                            Why is my heart rate sensor not detecting properly?
                            <span class="toggle-icon" aria-hidden="true" id="toggle-icon-10" role="presentation">+</span>
                        </button>
                        <div id="faq-answer-10" class="faq-answer" role="region" aria-labelledby="faq-question-10">
                            <div class="faq-answer-content" id="answer-content-10" role="text">
                                <p id="hr-trouble-intro" role="text">Common issues with the MAX30102 heart rate sensor include:</p>
                                <ul id="hr-trouble-list" role="list">
                                    <li id="hr-trouble-1" role="listitem">Inadequate finger contact with the sensor (ensure firm but gentle pressure)</li>
                                    <li id="hr-trouble-2" role="listitem">Incorrect LED intensity settings (adjust in code if signal is too weak)</li>
                                    <li id="hr-trouble-3" role="listitem">Excess ambient light affecting readings (shield the sensor)</li>
                                </ul>
                                <p id="hr-trouble-code" role="text">You can try adjusting these parameters in your code:</p>
                                <div class="code-block" id="hr-trouble-code-block" role="code">
                                    <pre id="hr-trouble-code-pre" role="presentation"><code id="hr-trouble-code-content" role="code">// Try these settings for better readings
particleSensor.setup(60, 4, 2, 100, 411, 4096); 
// Parameters: LED brightness, sample averaging, LED mode,
// sample rate, pulse width, ADC range</code></pre>
                                </div>
                                <p id="hr-trouble-debug" role="text">For debugging, add this code to print raw values to the Serial Monitor:</p>
                                <div class="code-block" id="hr-debug-code" role="code">
                                    <pre id="hr-debug-code-pre" role="presentation"><code id="hr-debug-code-content" role="code">Serial.print("IR=");
Serial.print(irValue);
Serial.print("\tBPM=");
Serial.println(beatsPerMinute);</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer role="contentinfo" id="page-footer">
            <p id="version-info" role="text">Mental Health Monitoring System - Version 1.0.2</p>
            <p id="contact-info" role="text">For questions about accessibility, please contact <a href="mailto:g4lihru@students.unnes.ac.id" id="support-email" role="link" title="Email support">g4lihru@students.unnes.ac.id</a></p>
            <div class="footer-links" id="footer-links" role="navigation" aria-label="Footer Links">
                <a href="#" id="privacy-policy-link" role="link">Privacy Policy</a> | 
                <a href="#" id="terms-link" role="link">Terms of Use</a> | 
                <a href="#" id="github-link" role="link">GitHub Project</a>
            </div>
        </footer>
    </div>

    <div id="accessibility-dialog" class="modal" role="dialog" aria-labelledby="accessibility-title" aria-modal="true" aria-hidden="true">
        <div class="modal-content" role="document">
            <h2 id="accessibility-title" role="heading" aria-level="2">Accessibility Options</h2>
            <button id="close-dialog" class="close-button" aria-label="Close accessibility dialog" role="button">&times;</button>
            <div class="accessibility-options" role="group" aria-labelledby="accessibility-title">
                <div class="option" role="group" aria-labelledby="font-size-label">
                    <label for="font-size" id="font-size-label">Font Size:</label>
                    <select id="font-size" name="font-size" aria-labelledby="font-size-label" role="combobox">
                        <option value="normal" role="option">Normal</option>
                        <option value="large" role="option">Large</option>
                        <option value="xlarge" role="option">Extra Large</option>
                    </select>
                </div>
                <div class="option" role="group" aria-labelledby="contrast-label">
                    <label for="contrast" id="contrast-label">Contrast:</label>
                    <select id="contrast" name="contrast" aria-labelledby="contrast-label" role="combobox">
                        <option value="normal" role="option">Normal</option>
                        <option value="high" role="option">High Contrast</option>
                        <option value="dark" role="option">Dark Mode</option>
                    </select>
                </div>
                <div class="option" role="group" aria-labelledby="animation-label">
                    <label for="reduce-animation" id="animation-label">Animations:</label>
                    <select id="reduce-animation" name="reduce-animation" aria-labelledby="animation-label" role="combobox">
                        <option value="normal" role="option">Normal</option>
                        <option value="reduced" role="option">Reduced Motion</option>
                    </select>
                </div>
                <button id="apply-settings" class="btn" role="button">Apply Settings</button>
                <button id="reset-settings" class="btn" role="button">Reset to Default</button>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Get all FAQ question buttons
        const faqQuestions = document.querySelectorAll('.faq-question');
        
        // Add click event listeners to each question
        faqQuestions.forEach(question => {
            const answerId = question.getAttribute('aria-controls');
            const answer = document.getElementById(answerId);
            
            // Initialize ARIA attributes
            question.setAttribute('aria-expanded', 'false');
            answer.setAttribute('aria-hidden', 'true');
            
            question.addEventListener('click', function() {
                // Toggle aria-expanded attribute
                const expanded = this.getAttribute('aria-expanded') === 'true';
                this.setAttribute('aria-expanded', !expanded);
                answer.setAttribute('aria-hidden', expanded);
                
                // Announce state change to screen readers
                const liveRegion = document.getElementById('aria-live-region');
                liveRegion.textContent = expanded ? 'Collapsed answer' : 'Expanded answer';
                
                // Change the toggle icon
                const toggleIcon = this.querySelector('.toggle-icon');
                toggleIcon.textContent = expanded ? '+' : '-';
                toggleIcon.setAttribute('aria-hidden', 'true');
            });
            
            // Add keyboard event listener for accessibility
            question.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.click();
                }
            });
        });

        // Accessibility dialog functionality
        const accessibilityDialog = document.getElementById('accessibility-dialog');
        const closeDialog = document.getElementById('close-dialog');
        const applySettings = document.getElementById('apply-settings');
        const resetSettings = document.getElementById('reset-settings');
        
        // Focus trap for modal
        function trapFocus(e) {
            if (e.key === 'Tab') {
                const focusableElements = accessibilityDialog.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];
                
                if (e.shiftKey) {
                    if (document.activeElement === firstElement) {
                        lastElement.focus();
                        e.preventDefault();
                    }
                } else {
                    if (document.activeElement === lastElement) {
                        firstElement.focus();
                        e.preventDefault();
                    }
                }
            }
        }
        
        document.getElementById('accessibility-link').addEventListener('click', function(e) {
            e.preventDefault();
            accessibilityDialog.setAttribute('aria-hidden', 'false');
            accessibilityDialog.style.display = 'block';
            closeDialog.focus();
            
            // Add event listeners for focus trap
            document.addEventListener('keydown', trapFocus);
        });

        closeDialog.addEventListener('click', function() {
            accessibilityDialog.setAttribute('aria-hidden', 'true');
            accessibilityDialog.style.display = 'none';
            document.getElementById('accessibility-link').focus();
            document.removeEventListener('keydown', trapFocus);
        });

        applySettings.addEventListener('click', function() {
            // Apply accessibility settings
            const fontSize = document.getElementById('font-size').value;
            const contrast = document.getElementById('contrast').value;
            const reduceAnimation = document.getElementById('reduce-animation').value;
            
            document.body.className = `${fontSize} ${contrast} ${reduceAnimation}`;
            
            // Announce changes
            const liveRegion = document.getElementById('aria-live-region');
            liveRegion.textContent = 'Accessibility settings applied';
            
            // Close dialog
            closeDialog.click();
        });

        resetSettings.addEventListener('click', function() {
            // Reset to default settings
            document.getElementById('font-size').value = 'normal';
            document.getElementById('contrast').value = 'normal';
            document.getElementById('reduce-animation').value = 'normal';
            document.body.className = '';
            
            // Announce changes
            const liveRegion = document.getElementById('aria-live-region');
            liveRegion.textContent = 'Accessibility settings reset to default';
        });

        // Close dialog when clicking outside
        accessibilityDialog.addEventListener('click', function(e) {
            if (e.target === accessibilityDialog) {
                closeDialog.click();
            }
        });

        // Add keyboard support for dialog
        accessibilityDialog.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeDialog.click();
            }
        });
    });
    </script>
</body>
</html>
